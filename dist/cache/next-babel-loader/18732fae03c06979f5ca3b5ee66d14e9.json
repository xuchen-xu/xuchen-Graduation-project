{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\react\\u6BD5\\u4E1A\\u8BBE\\u8BA1\\\\\\u5B9E\\u8DF5\\u8D44\\u6599\\\\20210201-test\\\\20210201\\\\code\\\\next-ts\\u6A21\\u677F\\\\my-app\\\\pages\\\\index.tsx\",\n    _s2 = $RefreshSig$();\n\nvar __jsx = React.createElement;\n// import Link from 'next/link'\nimport Layout from \"../components/Layout\";\nimport { withRouter } from \"next/router\";\nimport React, { useState } from \"react\";\nimport \"../static/css/font-awesome.css\";\nimport \"./css/index.css\";\nimport fetch from \"isomorphic-unfetch\";\n\nvar IndexPage = function IndexPage(props) {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  var _useState = useState(\"\"),\n      name = _useState[0],\n      setName = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      pwd = _useState2[0],\n      setPwd = _useState2[1];\n\n  var handleName = function handleName(e) {\n    _s();\n\n    var _useState3 = useState(\"\"),\n        name = _useState3[0],\n        setName = _useState3[1];\n\n    ({\n      name: e.target.value\n    });\n    console.log(_this.state.name);\n  };\n\n  _s(handleName, \"JQEeRLI2KF1r0Ucqk3AyGo6OLII=\");\n\n  var handlePwd = function handlePwd(e) {\n    _this.setState({\n      pwd: e.target.value\n    });\n\n    console.log(_this.state.pwd);\n  };\n\n  var doLogin = function doLogin() {\n    _this.props.show.forEach(function (item) {\n      if (item.userName == _this.state.name && item.password == _this.state.pwd) {\n        sessionStorage.setItem(\"name\", _this.state.name);\n        sessionStorage.setItem(\"pwd\", _this.state.pwd);\n        console.log(sessionStorage, \"xxxxxxx\");\n\n        _this.props.history.push('/home');\n      }\n    });\n  };\n\n  return __jsx(Layout, {\n    title: \"\\u767B\\u5F55\\u9875\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"container clear\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"tbl\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  })), __jsx(\"div\", {\n    className: \"ph clear\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 11\n    }\n  }), __jsx(\"div\", {\n    className: \"m clear\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, \"\\u5BC6\\u7801\\u767B\\u5F55\"), __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }, __jsx(\"form\", {\n    className: \"loginBox\",\n    action: \"/home\",\n    method: \"post\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 15\n    }\n  }, __jsx(\"input\", {\n    type: \"text\",\n    value: _this.state.name,\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u7528\\u6237\\u540D\",\n    onChange: _this.handleName,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 17\n    }\n  }), __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }), __jsx(\"input\", {\n    type: \"text\",\n    value: state.pwd,\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u5BC6\\u7801\",\n    onChange: _this.handlePwd,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 17\n    }\n  }), __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }\n  }), __jsx(\"input\", {\n    type: \"button\",\n    value: \"\\u767B\\u5F55\\u8C46\\u74E3\\u8BFB\\u4E66\",\n    onClick: _this.doLogin,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 17\n    }\n  }))), __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }), __jsx(\"div\", {\n    className: \"tx clear\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }\n  }, \"---\\u6362\\u4E00\\u79CD\\u767B\\u5F55\\u65B9\\u5F0F---\"), __jsx(\"div\", {\n    className: \"wx\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }), __jsx(\"div\", {\n    className: \"xl clear\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  })), __jsx(\"div\", {\n    className: \"sew\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }), __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  }, \"\\u767B\\u5F55\\u5B54\\u5B50\\u65E7\\u4E66APP\"))));\n};\n\n_s2(IndexPage, \"k3+gQpstBXqs5AZK37HZ7uMhnFc=\");\n\n_c = IndexPage;\n\nIndexPage.getInitialProps = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(context) {\n    var res, show;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return fetch(\"http://localhost:3001/users\");\n\n          case 2:\n            res = _context.sent;\n            _context.next = 5;\n            return res.json();\n\n          case 5:\n            show = _context.sent;\n            return _context.abrupt(\"return\", {\n              show: show\n            });\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexport default _c2 = withRouter(IndexPage);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"IndexPage\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["D:/react毕业设计/实践资料/20210201-test/20210201/code/next-ts模板/my-app/pages/index.tsx"],"names":["Layout","withRouter","React","useState","fetch","IndexPage","props","name","setName","pwd","setPwd","handleName","e","target","value","console","log","state","handlePwd","setState","doLogin","show","forEach","item","userName","password","sessionStorage","setItem","history","push","getInitialProps","context","res","json"],"mappings":"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","sourcesContent":["// import Link from 'next/link'\nimport Layout from \"../components/Layout\";\nimport { withRouter } from \"next/router\";\nimport React , { FC, useState, useEffect } from \"react\";\nimport \"@/static/css/font-awesome.css\";\nimport \"./css/index.css\";\nimport fetch from \"isomorphic-unfetch\";\nimport { fetchpost, fetchget } from \"../utils/zgfetch\";\n// import Fromdemo from \"./components/from\"\ntype State = {\n  userName: string; //用户名\n  passWord: string; //密码\n  name: string;\n  pwd: string;\n};\n\ntype IProps = {\n  show: [{}];\n  history:any;\n};\nconst IndexPage = (props: any) => {\n \n   let [name,setName]=useState(\"\");\n   let [pwd,setPwd]=useState(\"\");\n\n  const handleName = (e:any)=>{\n    let [name,setName]=useState(\"\");\n    ({\n         name:e.target.value\n     })\n     console.log(this.state.name)\n  }\n\n  const handlePwd = (e:any)=>{\n    this.setState({\n        pwd:e.target.value\n    })\n    console.log(this.state.pwd)\n  }\n\n  const doLogin = ()=>{\n      this.props.show.forEach((item:any)=>{\n          if(item.userName == this.state.name && item.password == this.state.pwd){\n              sessionStorage.setItem(\"name\" , this.state.name);\n              sessionStorage.setItem(\"pwd\" , this.state.pwd)\n              console.log(sessionStorage,\"xxxxxxx\")\n              this.props.history.push('/home')\n          }\n      })\n  }\n\n    return (\n      <Layout title=\"登录页\">\n        <div className=\"container clear\">\n          <div className=\"tbl\">\n            <div></div>\n          </div>\n          <div className=\"ph clear\">\n            {/* <%--显示手机图--%> */}\n            {/* <div className=\"o\"></div> */}\n          </div>\n          <div className=\"m clear\">\n            <div>密码登录</div>\n            <div>\n              <form className=\"loginBox\" action=\"/home\" method=\"post\">\n                <input\n                  type=\"text\"\n                  value={this.state.name}\n                  placeholder=\"请输入用户名\"\n                  onChange={this.handleName}\n                />\n                <br></br>\n                <input\n                  type=\"text\"\n                  value={state.pwd}\n                  placeholder=\"请输入密码\"\n                  onChange={this.handlePwd}\n                />\n                <br></br>\n                <input type=\"button\" value=\"登录豆瓣读书\" onClick={this.doLogin} />\n              </form>\n              {/* <Fromdemo></Fromdemo> */}\n              {/* <div></div> */}\n            </div>\n            {/* <%--二维码标识--%> */}\n            <div></div>\n            <div className=\"tx clear\">---换一种登录方式---</div>\n            <div className=\"wx\"></div>\n            <div className=\"xl clear\"></div>\n          </div>\n          <div className=\"sew\">\n            <div></div>\n            <div>登录孔子旧书APP</div>\n          </div>\n        </div>\n      </Layout>\n    );\n  \n}\n\n\nIndexPage.getInitialProps = async (context: any) => {\n    const res = await fetch(\"http://localhost:3001/users\");\n    const show = await res.json();\n    //这边返回的数据会被挂载到组件的props中\n    return { show };\n  }\n\nexport default withRouter(IndexPage);"]},"metadata":{},"sourceType":"module"}