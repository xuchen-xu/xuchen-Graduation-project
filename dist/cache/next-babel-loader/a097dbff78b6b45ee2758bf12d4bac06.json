{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\react\\u6BD5\\u4E1A\\u8BBE\\u8BA1\\\\\\u5B9E\\u8DF5\\u8D44\\u6599\\\\20210201-test\\\\20210201\\\\code\\\\next-ts\\u6A21\\u677F\\\\my-app\\\\pages\\\\index.tsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n// import Link from 'next/link'\nimport Layout from \"../components/Layout\";\nimport { withRouter } from \"next/router\";\nimport React, { useState } from \"react\";\nimport \"../static/css/font-awesome.css\";\nimport \"./css/index.css\";\nimport fetch from \"isomorphic-unfetch\";\n\nvar IndexPage = function IndexPage(props) {\n  _s();\n\n  var _useState = useState(\"\"),\n      name = _useState[0],\n      setName = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      pwd = _useState2[0],\n      setPwd = _useState2[1];\n\n  var handleName = function handleName(e) {\n    setName(name = e.target.value);\n    console.log(name);\n  };\n\n  var handlePwd = function handlePwd(e) {\n    setPwd(pwd = e.target.value);\n    console.log(pwd);\n  };\n\n  var doLogin = function doLogin() {\n    props.show.forEach(function (item) {\n      if (item.userName == name && item.password == _this.state.pwd) {\n        sessionStorage.setItem(\"name\", _this.state.name);\n        sessionStorage.setItem(\"pwd\", _this.state.pwd);\n        console.log(sessionStorage, \"xxxxxxx\");\n\n        _this.props.history.push(\"/home\");\n      }\n    });\n  };\n\n  return __jsx(Layout, {\n    title: \"\\u767B\\u5F55\\u9875\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"container clear\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"tbl\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 11\n    }\n  })), __jsx(\"div\", {\n    className: \"ph clear\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }), __jsx(\"div\", {\n    className: \"m clear\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 11\n    }\n  }, \"\\u5BC6\\u7801\\u767B\\u5F55\"), __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 11\n    }\n  }, __jsx(\"form\", {\n    className: \"loginBox\",\n    action: \"/home\",\n    method: \"post\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }\n  }, __jsx(\"input\", {\n    type: \"text\",\n    value: _this.state.name,\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u7528\\u6237\\u540D\",\n    onChange: _this.handleName,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 15\n    }\n  }), __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 15\n    }\n  }), __jsx(\"input\", {\n    type: \"text\",\n    value: state.pwd,\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u5BC6\\u7801\",\n    onChange: _this.handlePwd,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 15\n    }\n  }), __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 15\n    }\n  }), __jsx(\"input\", {\n    type: \"button\",\n    value: \"\\u767B\\u5F55\\u8C46\\u74E3\\u8BFB\\u4E66\",\n    onClick: _this.doLogin,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 15\n    }\n  }))), __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }), __jsx(\"div\", {\n    className: \"tx clear\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 11\n    }\n  }, \"---\\u6362\\u4E00\\u79CD\\u767B\\u5F55\\u65B9\\u5F0F---\"), __jsx(\"div\", {\n    className: \"wx\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 11\n    }\n  }), __jsx(\"div\", {\n    className: \"xl clear\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  })), __jsx(\"div\", {\n    className: \"sew\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 11\n    }\n  }), __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  }, \"\\u767B\\u5F55\\u5B54\\u5B50\\u65E7\\u4E66APP\"))));\n};\n\n_s(IndexPage, \"bc/2y058al2ghJhGWwWrhF0Ujwg=\");\n\n_c = IndexPage;\n\nIndexPage.getInitialProps = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(context) {\n    var res, show;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return fetch(\"http://localhost:3001/users\");\n\n          case 2:\n            res = _context.sent;\n            _context.next = 5;\n            return res.json();\n\n          case 5:\n            show = _context.sent;\n            return _context.abrupt(\"return\", {\n              show: show\n            });\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexport default _c2 = withRouter(IndexPage);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"IndexPage\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["D:/react毕业设计/实践资料/20210201-test/20210201/code/next-ts模板/my-app/pages/index.tsx"],"names":["Layout","withRouter","React","useState","fetch","IndexPage","props","name","setName","pwd","setPwd","handleName","e","target","value","console","log","handlePwd","doLogin","show","forEach","item","userName","password","state","sessionStorage","setItem","history","push","getInitialProps","context","res","json"],"mappings":"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","sourcesContent":["// import Link from 'next/link'\nimport Layout from \"../components/Layout\";\nimport { withRouter } from \"next/router\";\nimport React, { FC, useState, useEffect } from \"react\";\nimport \"@/static/css/font-awesome.css\";\nimport \"./css/index.css\";\nimport fetch from \"isomorphic-unfetch\";\nimport { fetchpost, fetchget } from \"../utils/zgfetch\";\n// import Fromdemo from \"./components/from\"\ntype State = {\n  userName: string; //用户名\n  passWord: string; //密码\n  name: string;\n  pwd: string;\n};\n\ntype IProps = {\n  show: [{}];\n  history: any;\n};\nconst IndexPage = (props: any) => {\n  let [name, setName] = useState(\"\");\n  let [pwd, setPwd] = useState(\"\");\n\n  const handleName = (e: any) => {\n    setName((name = e.target.value));\n    console.log(name);\n  };\n\n  const handlePwd = (e: any) => {\n    setPwd((pwd = e.target.value));\n    console.log(pwd);\n  };\n\n  const doLogin = () => {\n    props.show.forEach((item: any) => {\n      if (item.userName == name && item.password == this.state.pwd) {\n        sessionStorage.setItem(\"name\", this.state.name);\n        sessionStorage.setItem(\"pwd\", this.state.pwd);\n        console.log(sessionStorage, \"xxxxxxx\");\n        this.props.history.push(\"/home\");\n      }\n    });\n  };\n\n  return (\n    <Layout title=\"登录页\">\n      <div className=\"container clear\">\n        <div className=\"tbl\">\n          <div></div>\n        </div>\n        <div className=\"ph clear\">\n          {/* <%--显示手机图--%> */}\n          {/* <div className=\"o\"></div> */}\n        </div>\n        <div className=\"m clear\">\n          <div>密码登录</div>\n          <div>\n            <form className=\"loginBox\" action=\"/home\" method=\"post\">\n              <input\n                type=\"text\"\n                value={this.state.name}\n                placeholder=\"请输入用户名\"\n                onChange={this.handleName}\n              />\n              <br></br>\n              <input\n                type=\"text\"\n                value={state.pwd}\n                placeholder=\"请输入密码\"\n                onChange={this.handlePwd}\n              />\n              <br></br>\n              <input\n                type=\"button\"\n                value=\"登录豆瓣读书\"\n                onClick={this.doLogin}\n              />\n            </form>\n            {/* <Fromdemo></Fromdemo> */}\n            {/* <div></div> */}\n          </div>\n          {/* <%--二维码标识--%> */}\n          <div></div>\n          <div className=\"tx clear\">---换一种登录方式---</div>\n          <div className=\"wx\"></div>\n          <div className=\"xl clear\"></div>\n        </div>\n        <div className=\"sew\">\n          <div></div>\n          <div>登录孔子旧书APP</div>\n        </div>\n      </div>\n    </Layout>\n  );\n};\n\nIndexPage.getInitialProps = async (context: any) => {\n  const res = await fetch(\"http://localhost:3001/users\");\n  const show = await res.json();\n  //这边返回的数据会被挂载到组件的props中\n  return { show };\n};\n\nexport default withRouter(IndexPage);\n"]},"metadata":{},"sourceType":"module"}