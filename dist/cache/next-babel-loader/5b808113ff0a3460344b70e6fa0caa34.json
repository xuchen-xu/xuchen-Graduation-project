{"ast":null,"code":"var _jsxFileName = \"D:\\\\react\\u6BD5\\u4E1A\\u8BBE\\u8BA1\\\\\\u5B9E\\u8DF5\\u8D44\\u6599\\\\20210201-test\\\\20210201\\\\code\\\\next-ts\\u6A21\\u677F\\\\my-app\\\\pages\\\\shop\\\\index.jsx\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState } from \"react\";\n\nclass CartPage extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      datalist: [{\n        \"imgUrl\": \"https://wochu.oss-cn-hangzhou.aliyuncs.com/upload/c8db2f99-d79e-4c4a-97e8-3e95c67a3b2e.jpg\",\n        \"name\": \"小青菜350g\",\n        \"newprice\": \"4.5\",\n        \"oldprice\": \"4.9\",\n        \"checked\": false,\n        \"count\": 1\n      }, {\n        \"imgUrl\": \"https://img.wochu.cn/upload/abbc6852-711f-4d09-8e61-216c13505ccd.jpg\",\n        \"name\": \"洪湖渔家香辣大闸蟹500g\",\n        \"newprice\": \"15.9\",\n        \"oldprice\": \"39.9\",\n        \"checked\": false,\n        \"count\": 1\n      }, {\n        \"imgUrl\": \"https://wochu.oss-cn-hangzhou.aliyuncs.com/upload/c8db2f99-d79e-4c4a-97e8-3e95c67a3b2e.jpg\",\n        \"name\": \"小青菜350g\",\n        \"newprice\": \"4.5\",\n        \"oldprice\": \"4.9\",\n        \"checked\": false,\n        \"count\": 1\n      }],\n      all: false,\n      sumprice: 0,\n      one: false,\n      sumcount: 0\n    });\n  }\n\n  render() {\n    return __jsx(\"div\", {\n      className: style.cartList,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 13\n      }\n    }, __jsx(\"div\", {\n      className: style.cartListItem,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 17\n      }\n    }, __jsx(\"ul\", {\n      className: style.shopList,\n      ref: \"myul\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 21\n      }\n    }, this.state.datalist.map((item, index) => __jsx(\"li\", {\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 29\n      }\n    }, __jsx(\"input\", {\n      type: \"checkbox\",\n      className: style.checkbtn + ' ' + style.UnChecked,\n      ref: \"mytext\",\n      onChange: () => {\n        this.handleChange(index);\n      },\n      checked: item.checked,\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 29\n      }\n    }), __jsx(\"div\", {\n      className: style.shopImg,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 29\n      }\n    }, __jsx(\"div\", {\n      className: style.shopImgShow,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 33\n      }\n    }, __jsx(\"img\", {\n      src: item.imgUrl,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 37\n      }\n    }))), __jsx(\"div\", {\n      className: style.shopInfo,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 29\n      }\n    }, __jsx(\"div\", {\n      className: style.shopTitle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 33\n      }\n    }, item.name), __jsx(\"div\", {\n      className: style.shopCoupen,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 33\n      }\n    }), __jsx(\"div\", {\n      className: style.shopPrice,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 33\n      }\n    }, __jsx(\"div\", {\n      className: style.price,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 37\n      }\n    }, __jsx(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 41\n      }\n    }, \"\\uFFE5\", item.newprice), __jsx(\"i\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 41\n      }\n    }, \"\\uFFE5\", item.oldprice)), __jsx(\"div\", {\n      className: style.shopSelect,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 37\n      }\n    }, __jsx(\"button\", {\n      className: style.minus,\n      onClick: () => {\n        this.handleMinus(index);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 41\n      }\n    }, \"-\"), __jsx(\"input\", {\n      type: \"text\",\n      value: this.state.datalist[index].count || '',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 41\n      }\n    }), __jsx(\"button\", {\n      className: style.add,\n      onClick: () => {\n        this.handleAdd(index);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 41\n      }\n    }, \"+\")))))))), __jsx(\"div\", {\n      className: style.sum,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }\n    }, __jsx(\"input\", {\n      type: \"checkbox\",\n      onChange: () => {\n        this.handleAll();\n      },\n      checked: this.state.all,\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 21\n      }\n    }), __jsx(\"div\", {\n      className: style.checkPrice,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 21\n      }\n    }, __jsx(\"div\", {\n      className: style.totalPrice,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 25\n      }\n    }, __jsx(\"span\", {\n      className: style.allsum,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 29\n      }\n    }, \"\\u5408\\u8BA1\"), __jsx(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 29\n      }\n    }, \"\\uFFE5\", this.state.sumprice)), __jsx(\"div\", {\n      className: style.fee,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 25\n      }\n    }, \"(\\u4E0D\\u542B\\u8FD0\\u8D39)\")), __jsx(\"div\", {\n      className: this.state.one ? style.btnCheck : style.btnNoCheck,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 25\n      }\n    }, \"\\u7ED3\\u7B97\", __jsx(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 25\n      }\n    }, \"(\", this.state.sumcount, \")\"))));\n  } // 单选\n\n\n  handleChange(index) {\n    var list = [...this.state.datalist];\n    list[index].checked = !list[index].checked;\n    var every = list.every((item, index) => {\n      return item.checked == true;\n    }); // 单选框中如果有一个是 checked的是true就可以\n\n    var some = list.some((item, index) => {\n      return list[index].checked;\n    });\n    this.setState({\n      datalist: list,\n      all: every,\n      one: some //设定结算框的样式是哪个，根据list[index].checked\n\n    });\n    this.SumPrice();\n  } // 全选\n\n\n  handleAll() {\n    var list = [...this.state.datalist];\n    var all = this.state.all;\n    all = !all;\n\n    for (var i = 0; i < list.length; i++) {\n      list[i].checked = all;\n    }\n\n    this.setState({\n      all: all,\n      one: all //全选的状态直接影响结算框的样式\n\n    });\n    this.SumPrice();\n  }\n\n  handleAdd(index) {\n    // 设定的value= {this.state.datalist[index].count}\n    var list = [...this.state.datalist];\n    list[index].count++;\n    this.setState({\n      datalist: list\n    });\n    this.SumPrice();\n  }\n\n  handleMinus(index) {\n    // 设定的value= {this.state.datalist[index].count}\n    var list = [...this.state.datalist];\n    list[index].count--;\n    list[index].count = list[index].count < 1 ? 1 : list[index].count;\n    this.setState({\n      datalist: list\n    });\n    this.SumPrice();\n  }\n\n  SumPrice() {\n    var sum = 0;\n    var count = 0;\n    var list = [...this.state.datalist];\n\n    for (var i = 0; i < list.length; i++) {\n      if (list[i].checked === true) {\n        sum += list[i].newprice * list[i].count;\n        count += list[i].count;\n      }\n    }\n\n    this.setState({\n      sumprice: sum,\n      sumcount: count //结算个数\n\n    });\n  }\n\n}\n\nexport default CartPage;","map":{"version":3,"sources":["D:/react毕业设计/实践资料/20210201-test/20210201/code/next-ts模板/my-app/pages/shop/index.jsx"],"names":["React","useState","CartPage","Component","datalist","all","sumprice","one","sumcount","render","style","cartList","cartListItem","shopList","state","map","item","index","checkbtn","UnChecked","handleChange","checked","shopImg","shopImgShow","imgUrl","shopInfo","shopTitle","name","shopCoupen","shopPrice","price","newprice","oldprice","shopSelect","minus","handleMinus","count","add","handleAdd","sum","handleAll","checkPrice","totalPrice","allsum","fee","btnCheck","btnNoCheck","list","every","some","setState","SumPrice","i","length"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nclass CartPage extends Component {\r\n    state = {\r\n        datalist:[\r\n            {\r\n                \"imgUrl\":\"https://wochu.oss-cn-hangzhou.aliyuncs.com/upload/c8db2f99-d79e-4c4a-97e8-3e95c67a3b2e.jpg\",\r\n                \"name\": \"小青菜350g\",\r\n                \"newprice\" : \"4.5\",\r\n                \"oldprice\" : \"4.9\",\r\n                \"checked\" :false,\r\n                \"count\" :1\r\n            },\r\n        \r\n            {\r\n                \"imgUrl\":\"https://img.wochu.cn/upload/abbc6852-711f-4d09-8e61-216c13505ccd.jpg\",\r\n                \"name\": \"洪湖渔家香辣大闸蟹500g\",\r\n                \"newprice\" : \"15.9\",\r\n                \"oldprice\" : \"39.9\",\r\n                \"checked\" :false,\r\n                \"count\" :1\r\n        \r\n            },\r\n            {\r\n                \"imgUrl\":\"https://wochu.oss-cn-hangzhou.aliyuncs.com/upload/c8db2f99-d79e-4c4a-97e8-3e95c67a3b2e.jpg\",\r\n                \"name\": \"小青菜350g\",\r\n                \"newprice\" : \"4.5\",\r\n                \"oldprice\" : \"4.9\",\r\n                \"checked\" :false,\r\n                \"count\" :1\r\n        \r\n            },\r\n        ],\r\n        all : false,\r\n        sumprice :0,\r\n        one : false,\r\n        sumcount:0\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={style.cartList}>\r\n                <div className={style.cartListItem}>\r\n                    <ul className={style.shopList} ref=\"myul\">\r\n                        {/* 对应的每个购物车条目 */}\r\n                        {\r\n                            this.state.datalist.map((item,index)=>\r\n                                \r\n                            <li key={index}> \r\n                            <input type=\"checkbox\" className={style.checkbtn+' '+style.UnChecked}  ref=\"mytext\"\r\n                            onChange={()=>{this.handleChange(index)}} checked={item.checked} value=\"\"\r\n                            />\r\n                            <div className={style.shopImg}>\r\n                                {/* 点击图片跳转到页面详情 */}\r\n                                <div className={style.shopImgShow}>\r\n                                    <img src={item.imgUrl} alt=\"\"/>\r\n                                </div>\r\n                            </div>\r\n                            {/* 商品详情 */}\r\n                            <div className={style.shopInfo}>\r\n                                <div className={style.shopTitle}>{item.name}</div>\r\n                                <div className={style.shopCoupen}></div>\r\n                                <div className={style.shopPrice}>\r\n                                    <div className={style.price}>\r\n                                        <span>￥{item.newprice}</span>\r\n                                        <i>￥{item.oldprice}</i>\r\n                                    </div>\r\n                                    <div className={style.shopSelect}>\r\n                                        <button className={style.minus} onClick={()=>{this.handleMinus(index)}}>-</button>\r\n                                        <input type=\"text\" value={this.state.datalist[index].count||''}/>\r\n                                        <button className={style.add} onClick={()=>{this.handleAdd(index)}}>+</button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </li>\r\n                            )\r\n                        }\r\n                        \r\n                    </ul>\r\n                </div>\r\n\r\n                <div className={style.sum}>\r\n                    <input type=\"checkbox\" onChange={()=>{this.handleAll()}} checked={this.state.all} value=\"\"/>\r\n                    <div className={style.checkPrice}>\r\n                        {/* 合算 */}\r\n                        <div className={style.totalPrice}>\r\n                            <span className={style.allsum}>合计</span>\r\n                            <span>￥{this.state.sumprice}</span>\r\n                        </div>\r\n                        {/* 不含运费 */}\r\n                        <div className={style.fee}>(不含运费)</div>\r\n                    </div>\r\n\r\n                        {/* 结算按钮 */}\r\n                        <div className={this.state.one?style.btnCheck:style.btnNoCheck}>结算\r\n                        <span>({this.state.sumcount})</span>\r\n                        </div>\r\n                </div>\r\n               \r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n    // 单选\r\n    handleChange(index){\r\n\r\n        var list = [...this.state.datalist]\r\n        list[index].checked = !list[index].checked\r\n        \r\n        \r\n        var every=list.every((item,index)=>{\r\n        return item.checked==true;\r\n        })\r\n\r\n        // 单选框中如果有一个是 checked的是true就可以\r\n        var some = list.some((item,index)=>{\r\n            return list[index].checked\r\n        })\r\n        \r\n       \r\n        this.setState({\r\n            datalist :list,\r\n            all : every,\r\n            one : some  //设定结算框的样式是哪个，根据list[index].checked\r\n        })\r\n        \r\n        this.SumPrice()\r\n\r\n    }\r\n\r\n    // 全选\r\n    handleAll(){\r\n        var list = [...this.state.datalist]\r\n        var all = this.state.all\r\n        all = ! all\r\n        for(var i = 0 ; i < list.length ;i++){\r\n            list[i].checked = all\r\n        }      \r\n\r\n        this.setState({\r\n            all : all,\r\n            one : all //全选的状态直接影响结算框的样式\r\n        })\r\n        this.SumPrice()\r\n    }\r\n\r\n\r\n    handleAdd(index){\r\n        // 设定的value= {this.state.datalist[index].count}\r\n        var list = [...this.state.datalist]\r\n        list[index].count++;\r\n        \r\n        this.setState({\r\n            datalist : list,\r\n        })\r\n       \r\n        this.SumPrice()\r\n       \r\n    }\r\n\r\n    handleMinus(index){\r\n        // 设定的value= {this.state.datalist[index].count}\r\n        var list = [...this.state.datalist];\r\n        list[index].count--\r\n        list[index].count=list[index].count<1?1:list[index].count; \r\n        this.setState({\r\n            datalist : list\r\n        })\r\n\r\n        this.SumPrice()\r\n    }\r\n\r\n    SumPrice(){\r\n        var sum=0\r\n        var count = 0;\r\n        var list = [...this.state.datalist]\r\n        for(var i =0; i< list.length ;i++){\r\n            if(list[i].checked=== true){\r\n                sum += list[i].newprice *list[i].count\r\n                count += list[i].count\r\n            }\r\n        }\r\n        \r\n        this.setState({\r\n            sumprice : sum,\r\n            sumcount : count //结算个数\r\n        })\r\n    }\r\n\r\n\r\n    \r\n    \r\n    \r\n}\r\n\r\n\r\nexport default CartPage;"]},"metadata":{},"sourceType":"module"}