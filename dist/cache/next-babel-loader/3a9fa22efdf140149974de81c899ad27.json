{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"D:\\\\react\\u6BD5\\u4E1A\\u8BBE\\u8BA1\\\\\\u5B9E\\u8DF5\\u8D44\\u6599\\\\20210201-test\\\\20210201\\\\code\\\\next-ts\\u6A21\\u677F\\\\my-app\\\\pages\\\\shop\\\\index.jsx\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { useState } from \"react\";\nimport style from \"./shop.less\";\n\nvar CartPage = /*#__PURE__*/function (_React$Component) {\n  _inherits(CartPage, _React$Component);\n\n  var _super = _createSuper(CartPage);\n\n  function CartPage() {\n    var _this;\n\n    _classCallCheck(this, CartPage);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      datalist: [{\n        \"imgUrl\": \"https://wochu.oss-cn-hangzhou.aliyuncs.com/upload/c8db2f99-d79e-4c4a-97e8-3e95c67a3b2e.jpg\",\n        \"name\": \"小青菜350g\",\n        \"newprice\": \"4.5\",\n        \"oldprice\": \"4.9\",\n        \"checked\": false,\n        \"count\": 1\n      }, {\n        \"imgUrl\": \"https://img.wochu.cn/upload/abbc6852-711f-4d09-8e61-216c13505ccd.jpg\",\n        \"name\": \"洪湖渔家香辣大闸蟹500g\",\n        \"newprice\": \"15.9\",\n        \"oldprice\": \"39.9\",\n        \"checked\": false,\n        \"count\": 1\n      }, {\n        \"imgUrl\": \"https://wochu.oss-cn-hangzhou.aliyuncs.com/upload/c8db2f99-d79e-4c4a-97e8-3e95c67a3b2e.jpg\",\n        \"name\": \"小青菜350g\",\n        \"newprice\": \"4.5\",\n        \"oldprice\": \"4.9\",\n        \"checked\": false,\n        \"count\": 1\n      }],\n      all: false,\n      sumprice: 0,\n      one: false,\n      sumcount: 0\n    });\n\n    return _this;\n  }\n\n  _createClass(CartPage, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return __jsx(\"div\", {\n        className: style.cartList,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 13\n        }\n      }, __jsx(\"div\", {\n        className: style.cartListItem,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 17\n        }\n      }, __jsx(\"ul\", {\n        className: style.shopList,\n        ref: \"myul\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 21\n        }\n      }, this.state.datalist.map(function (item, index) {\n        return __jsx(\"li\", {\n          key: index,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 29\n          }\n        }, __jsx(\"input\", {\n          type: \"checkbox\",\n          className: style.checkbtn + ' ' + style.UnChecked,\n          ref: \"mytext\",\n          onChange: function onChange() {\n            _this2.handleChange(index);\n          },\n          checked: item.checked,\n          value: \"\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 29\n          }\n        }), __jsx(\"div\", {\n          className: style.shopImg,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 29\n          }\n        }, __jsx(\"div\", {\n          className: style.shopImgShow,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 33\n          }\n        }, __jsx(\"img\", {\n          src: item.imgUrl,\n          alt: \"\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 37\n          }\n        }))), __jsx(\"div\", {\n          className: style.shopInfo,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 29\n          }\n        }, __jsx(\"div\", {\n          className: style.shopTitle,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 33\n          }\n        }, item.name), __jsx(\"div\", {\n          className: style.shopCoupen,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 33\n          }\n        }), __jsx(\"div\", {\n          className: style.shopPrice,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 33\n          }\n        }, __jsx(\"div\", {\n          className: style.price,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 37\n          }\n        }, __jsx(\"span\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 41\n          }\n        }, \"\\uFFE5\", item.newprice), __jsx(\"i\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 41\n          }\n        }, \"\\uFFE5\", item.oldprice)), __jsx(\"div\", {\n          className: style.shopSelect,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 37\n          }\n        }, __jsx(\"button\", {\n          className: style.minus,\n          onClick: function onClick() {\n            _this2.handleMinus(index);\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 41\n          }\n        }, \"-\"), __jsx(\"input\", {\n          type: \"text\",\n          value: _this2.state.datalist[index].count || '',\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 41\n          }\n        }), __jsx(\"button\", {\n          className: style.add,\n          onClick: function onClick() {\n            _this2.handleAdd(index);\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 41\n          }\n        }, \"+\")))));\n      }))), __jsx(\"div\", {\n        className: style.sum,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 17\n        }\n      }, __jsx(\"input\", {\n        type: \"checkbox\",\n        onChange: function onChange() {\n          _this2.handleAll();\n        },\n        checked: this.state.all,\n        value: \"\",\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }\n      }), __jsx(\"div\", {\n        className: style.checkPrice,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 21\n        }\n      }, __jsx(\"div\", {\n        className: style.totalPrice,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 25\n        }\n      }, __jsx(\"span\", {\n        className: style.allsum,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 29\n        }\n      }, \"\\u5408\\u8BA1\"), __jsx(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 29\n        }\n      }, \"\\uFFE5\", this.state.sumprice)), __jsx(\"div\", {\n        className: style.fee,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 25\n        }\n      }, \"(\\u4E0D\\u542B\\u8FD0\\u8D39)\")), __jsx(\"div\", {\n        className: this.state.one ? style.btnCheck : style.btnNoCheck,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 25\n        }\n      }, \"\\u7ED3\\u7B97\", __jsx(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 25\n        }\n      }, \"(\", this.state.sumcount, \")\"))));\n    } // 单选\n\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(index) {\n      var list = _toConsumableArray(this.state.datalist);\n\n      list[index].checked = !list[index].checked;\n      var every = list.every(function (item, index) {\n        return item.checked == true;\n      }); // 单选框中如果有一个是 checked的是true就可以\n\n      var some = list.some(function (item, index) {\n        return list[index].checked;\n      });\n      this.setState({\n        datalist: list,\n        all: every,\n        one: some //设定结算框的样式是哪个，根据list[index].checked\n\n      });\n      this.SumPrice();\n    } // 全选\n\n  }, {\n    key: \"handleAll\",\n    value: function handleAll() {\n      var list = _toConsumableArray(this.state.datalist);\n\n      var all = this.state.all;\n      all = !all;\n\n      for (var i = 0; i < list.length; i++) {\n        list[i].checked = all;\n      }\n\n      this.setState({\n        all: all,\n        one: all //全选的状态直接影响结算框的样式\n\n      });\n      this.SumPrice();\n    }\n  }, {\n    key: \"handleAdd\",\n    value: function handleAdd(index) {\n      // 设定的value= {this.state.datalist[index].count}\n      var list = _toConsumableArray(this.state.datalist);\n\n      list[index].count++;\n      this.setState({\n        datalist: list\n      });\n      this.SumPrice();\n    }\n  }, {\n    key: \"handleMinus\",\n    value: function handleMinus(index) {\n      // 设定的value= {this.state.datalist[index].count}\n      var list = _toConsumableArray(this.state.datalist);\n\n      list[index].count--;\n      list[index].count = list[index].count < 1 ? 1 : list[index].count;\n      this.setState({\n        datalist: list\n      });\n      this.SumPrice();\n    }\n  }, {\n    key: \"SumPrice\",\n    value: function SumPrice() {\n      var sum = 0;\n      var count = 0;\n\n      var list = _toConsumableArray(this.state.datalist);\n\n      for (var i = 0; i < list.length; i++) {\n        if (list[i].checked === true) {\n          sum += list[i].newprice * list[i].count;\n          count += list[i].count;\n        }\n      }\n\n      this.setState({\n        sumprice: sum,\n        sumcount: count //结算个数\n\n      });\n    }\n  }]);\n\n  return CartPage;\n}(React.Component);\n\nexport default CartPage;","map":{"version":3,"sources":["D:/react毕业设计/实践资料/20210201-test/20210201/code/next-ts模板/my-app/pages/shop/index.jsx"],"names":["React","useState","style","CartPage","datalist","all","sumprice","one","sumcount","cartList","cartListItem","shopList","state","map","item","index","checkbtn","UnChecked","handleChange","checked","shopImg","shopImgShow","imgUrl","shopInfo","shopTitle","name","shopCoupen","shopPrice","price","newprice","oldprice","shopSelect","minus","handleMinus","count","add","handleAdd","sum","handleAll","checkPrice","totalPrice","allsum","fee","btnCheck","btnNoCheck","list","every","some","setState","SumPrice","i","length","Component"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport style from \"./shop.less\"\r\nclass CartPage extends React.Component {\r\n    state = {\r\n        datalist:[\r\n            {\r\n                \"imgUrl\":\"https://wochu.oss-cn-hangzhou.aliyuncs.com/upload/c8db2f99-d79e-4c4a-97e8-3e95c67a3b2e.jpg\",\r\n                \"name\": \"小青菜350g\",\r\n                \"newprice\" : \"4.5\",\r\n                \"oldprice\" : \"4.9\",\r\n                \"checked\" :false,\r\n                \"count\" :1\r\n            },\r\n        \r\n            {\r\n                \"imgUrl\":\"https://img.wochu.cn/upload/abbc6852-711f-4d09-8e61-216c13505ccd.jpg\",\r\n                \"name\": \"洪湖渔家香辣大闸蟹500g\",\r\n                \"newprice\" : \"15.9\",\r\n                \"oldprice\" : \"39.9\",\r\n                \"checked\" :false,\r\n                \"count\" :1\r\n        \r\n            },\r\n            {\r\n                \"imgUrl\":\"https://wochu.oss-cn-hangzhou.aliyuncs.com/upload/c8db2f99-d79e-4c4a-97e8-3e95c67a3b2e.jpg\",\r\n                \"name\": \"小青菜350g\",\r\n                \"newprice\" : \"4.5\",\r\n                \"oldprice\" : \"4.9\",\r\n                \"checked\" :false,\r\n                \"count\" :1\r\n        \r\n            },\r\n        ],\r\n        all : false,\r\n        sumprice :0,\r\n        one : false,\r\n        sumcount:0\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={style.cartList}>\r\n                <div className={style.cartListItem}>\r\n                    <ul className={style.shopList} ref=\"myul\">\r\n                        {/* 对应的每个购物车条目 */}\r\n                        {\r\n                            this.state.datalist.map((item,index)=>\r\n                                \r\n                            <li key={index}> \r\n                            <input type=\"checkbox\" className={style.checkbtn+' '+style.UnChecked}  ref=\"mytext\"\r\n                            onChange={()=>{this.handleChange(index)}} checked={item.checked} value=\"\"\r\n                            />\r\n                            <div className={style.shopImg}>\r\n                                {/* 点击图片跳转到页面详情 */}\r\n                                <div className={style.shopImgShow}>\r\n                                    <img src={item.imgUrl} alt=\"\"/>\r\n                                </div>\r\n                            </div>\r\n                            {/* 商品详情 */}\r\n                            <div className={style.shopInfo}>\r\n                                <div className={style.shopTitle}>{item.name}</div>\r\n                                <div className={style.shopCoupen}></div>\r\n                                <div className={style.shopPrice}>\r\n                                    <div className={style.price}>\r\n                                        <span>￥{item.newprice}</span>\r\n                                        <i>￥{item.oldprice}</i>\r\n                                    </div>\r\n                                    <div className={style.shopSelect}>\r\n                                        <button className={style.minus} onClick={()=>{this.handleMinus(index)}}>-</button>\r\n                                        <input type=\"text\" value={this.state.datalist[index].count||''}/>\r\n                                        <button className={style.add} onClick={()=>{this.handleAdd(index)}}>+</button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </li>\r\n                            )\r\n                        }\r\n                        \r\n                    </ul>\r\n                </div>\r\n\r\n                <div className={style.sum}>\r\n                    <input type=\"checkbox\" onChange={()=>{this.handleAll()}} checked={this.state.all} value=\"\" readOnly/>\r\n                    <div className={style.checkPrice}>\r\n                        {/* 合算 */}\r\n                        <div className={style.totalPrice}>\r\n                            <span className={style.allsum}>合计</span>\r\n                            <span>￥{this.state.sumprice}</span>\r\n                        </div>\r\n                        {/* 不含运费 */}\r\n                        <div className={style.fee}>(不含运费)</div>\r\n                    </div>\r\n\r\n                        {/* 结算按钮 */}\r\n                        <div className={this.state.one?style.btnCheck:style.btnNoCheck}>结算\r\n                        <span>({this.state.sumcount})</span>\r\n                        </div>\r\n                </div>\r\n               \r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n    // 单选\r\n    handleChange(index){\r\n\r\n        var list = [...this.state.datalist]\r\n        list[index].checked = !list[index].checked\r\n        \r\n        \r\n        var every=list.every((item,index)=>{\r\n        return item.checked==true;\r\n        })\r\n\r\n        // 单选框中如果有一个是 checked的是true就可以\r\n        var some = list.some((item,index)=>{\r\n            return list[index].checked\r\n        })\r\n        \r\n       \r\n        this.setState({\r\n            datalist :list,\r\n            all : every,\r\n            one : some  //设定结算框的样式是哪个，根据list[index].checked\r\n        })\r\n        \r\n        this.SumPrice()\r\n\r\n    }\r\n\r\n    // 全选\r\n    handleAll(){\r\n        var list = [...this.state.datalist]\r\n        var all = this.state.all\r\n        all = ! all\r\n        for(var i = 0 ; i < list.length ;i++){\r\n            list[i].checked = all\r\n        }      \r\n\r\n        this.setState({\r\n            all : all,\r\n            one : all //全选的状态直接影响结算框的样式\r\n        })\r\n        this.SumPrice()\r\n    }\r\n\r\n\r\n    handleAdd(index){\r\n        // 设定的value= {this.state.datalist[index].count}\r\n        var list = [...this.state.datalist]\r\n        list[index].count++;\r\n        \r\n        this.setState({\r\n            datalist : list,\r\n        })\r\n       \r\n        this.SumPrice()\r\n       \r\n    }\r\n\r\n    handleMinus(index){\r\n        // 设定的value= {this.state.datalist[index].count}\r\n        var list = [...this.state.datalist];\r\n        list[index].count--\r\n        list[index].count=list[index].count<1?1:list[index].count; \r\n        this.setState({\r\n            datalist : list\r\n        })\r\n\r\n        this.SumPrice()\r\n    }\r\n\r\n    SumPrice(){\r\n        var sum=0\r\n        var count = 0;\r\n        var list = [...this.state.datalist]\r\n        for(var i =0; i< list.length ;i++){\r\n            if(list[i].checked=== true){\r\n                sum += list[i].newprice *list[i].count\r\n                count += list[i].count\r\n            }\r\n        }\r\n        \r\n        this.setState({\r\n            sumprice : sum,\r\n            sumcount : count //结算个数\r\n        })\r\n    }\r\n\r\n\r\n    \r\n    \r\n    \r\n}\r\n\r\n\r\nexport default CartPage;"]},"metadata":{},"sourceType":"module"}